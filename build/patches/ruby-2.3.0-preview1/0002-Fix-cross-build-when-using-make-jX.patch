From 546970d0f3a1b787116c4642dd276ccb455816db Mon Sep 17 00:00:00 2001
From: Lars Kanis <lars@greiz-reinsdorf.de>
Date: Fri, 4 Dec 2015 18:02:11 +0100
Subject: [PATCH 2/2] Fix cross build when using "make -jX"

If this dependency is missing, it can happen, that ruby arg
"-r$(arch)-fake" is used before this file is created.
---
 Makefile.in        | 2 +-
 win32/Makefile.sub | 2 --
 2 files changed, 1 insertion(+), 3 deletions(-)

diff --git a/Makefile.in b/Makefile.in
index 55ec051..fe56b87 100644
--- a/Makefile.in
+++ b/Makefile.in
@@ -258,7 +258,7 @@ ruby-runner.c: template/ruby-runner.c.in
 ruby-runner$(EXEEXT): ruby-runner.c
 	$(Q) $(PURIFY) $(CC) $(CFLAGS) $(CPPFLAGS) -DRUBY_INSTALL_NAME=$(RUBY_INSTALL_NAME) $(LDFLAGS) $(LIBS) $(OUTFLAG)$@ ruby-runner.c
 
-$(RBCONFIG): $($(CROSS_COMPILING:no=)PREP)
+$(RBCONFIG): $(PREP)
 
 rbconfig.rb: $(RBCONFIG)
 
diff --git a/win32/Makefile.sub b/win32/Makefile.sub
index 751cdb2..60f2e23 100644
--- a/win32/Makefile.sub
+++ b/win32/Makefile.sub
@@ -1061,9 +1061,7 @@ clean-enc distclean-enc realclean-enc:
 	@-$(MAKE) -f $(ENC_MK) $(MFLAGS) V=$(V) $(@:-enc=)
 !endif
 
-!if "$(CROSS_COMPILING)" == "no"
 $(RBCONFIG): $(PREP)
-!endif
 
 $(RCFILES): $(RBCONFIG) $(srcdir)/revision.h $(srcdir)/win32/resource.rb
 		@$(MINIRUBY) $(srcdir)/win32/resource.rb \
-- 
2.5.0

